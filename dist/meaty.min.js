var meaty=meaty||{};meaty.typeRegExp=/^([a-zA-Z0-9][a-zA-Z0-9!#\$&-\^_\.\+]*)\/([a-zA-Z0-9][a-zA-Z0-9!#\$&-\^_\.\+]*)?$/,meaty.parameterRegExp=/([a-zA-Z0-9][a-zA-Z0-9!#\$&-\^_\.\+]*)\s*=\s*([a-zA-Z0-9][a-zA-Z0-9!#\$&-\^_\.\+]*)$/g,meaty.parse=function(a){var b={},c=a.indexOf(";"),d=(-1!==c?a.substr(0,c):a).trim(),e=meaty.typeRegExp.exec(d);if(null===e)throw new Error('Invalid media type "'+a+'".');b.type=e[1],b.subType=e[2],b.suffix=null,b.tree=null;var f=b.subType.lastIndexOf("+");-1!==f&&(b.suffix=b.subType.substr(f+1),b.subType=b.subType.substr(0,f)),f=b.subType.indexOf("."),-1!==f&&(b.tree=b.subType.substr(0,f),b.subType=b.subType.substr(f+1)),b.parameters={},meaty.parameterRegExp.lastIndex=c;for(var g,h;null!==(e=meaty.parameterRegExp.exec(a));)g=e[1],h=e[2],b.parameters[g]=h;return new meaty.MediaType(b)},meaty.format=function(a){var b=[a.type,"/"];if("tree"in a&&null!==a.tree&&b.push(a.tree,"."),b.push(a.subType),"suffix"in a&&null!==a.suffix&&b.push("+",a.suffix),a.parameters&&0!==a.parameters.length){b.push(";");for(var c in a.parameters)if(a.parameters.hasOwnProperty(c)){var d=a.parameters[c];b.push(" ",c,"=",d)}}return b.join("")},meaty.MediaType=function(a){return"string"==typeof a||a instanceof String?meaty.parse(a):(this.type=a.type,this.tree=a.tree,this.subType=a.subType,this.suffix=a.suffix,void(this.parameters=a.parameters))},meaty.MediaType.hasTree=function(){return null!==this.tree},meaty.MediaType.hasSuffix=function(){return null!==this.suffix},meaty.MediaType.format=function(){meaty.format(this)};